<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>JavaScript | Populus Media - Integration Guide</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="JavaScript" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Populus Media - Integration Guide for Telehealth Media Partners" />
<meta property="og:description" content="Populus Media - Integration Guide for Telehealth Media Partners" />
<link rel="canonical" href="/docs/javascript" />
<meta property="og:url" content="/docs/javascript" />
<meta property="og:site_name" content="Populus Media - Integration Guide" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="JavaScript" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Populus Media - Integration Guide for Telehealth Media Partners","headline":"JavaScript","url":"/docs/javascript"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/docs/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/docs/feed.xml" title="Populus Media - Integration Guide" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/docs/">Populus Media - Integration Guide</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/docs/javascript">JavaScript</a><a class="page-link" href="/docs/html">HTML</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">JavaScript</h1>
  </header>

  <div class="post-content">
    <p>Integrating through a JavaScript API is a two-step process.  An optional third step allows developers to obtain status of the ad rendering process through an event handler.</p>

<h3 id="step-1---including-the-javascript-library-in-your-web-app-or-page">Step 1 - Including the JavaScript Library in your Web App or Page</h3>

<p>The JavaScript library must be loaded with the request variable of <strong><em>mode=api</em></strong>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;script src="https://cdn.populus-media.net/popcorn/v5/index.js?mode=api"&gt;
&lt;/script&gt;    
</code></pre></div></div>

<p>Once the library loads, the API is exposed through a window object called <strong><em>$pop</em></strong></p>

<h3 id="step-2---calling-the-javascript-api">Step 2 - Calling the JavaScript API</h3>

<p>Create and record the element-id associated with the container where extenal content from Populus Media would render.  In the example below, the parent container identifier is <em>custom-content</em>. Please note that the container element can also be generated dynamically.</p>

<p>Example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div id="custom-content"&gt;

&lt;/div&gt;
</code></pre></div></div>

<p>Call the <em>render()</em> method on the API.  The render method takes the parent container as the first argument and a list of attributes are passed as properties of an object as the second.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>let adObject = $pop.render(document.getElementById('custom-content'), {
	"partner": "test",
	"visit-id": "1234-5678-9abc-def0",
	"width": "640px",
	"height":"360px",
	"keywords": "plaque psoriasis,L40"
})
</code></pre></div></div>

<p>Where,</p>

<ul>
  <li>partner is the partner-code (provided by Populus Media)</li>
  <li>visit-id is the visit-id associcated witht he visit</li>
  <li>width is the width of the display container</li>
  <li>height is the height of the display container</li>
  <li>keywords are the keywords associated with the session / visit</li>
</ul>

<p>For a complete list of attributes that could be passed, please refer the <a href="index.html">home page</a>.</p>

<h3 id="step-3---obtaining-rendering-status">Step 3 - Obtaining rendering status</h3>

<p>Call to the <em>render()</em> method on the API returns an object, called the <strong><em>ad-object</em></strong>, which can provide useful information about the the work that library is doing.  A <em>null</em> response from render() would meant that there was a problem early in the lifecycle of ad rendering.    For problems that occur late stage which is by nature asynchronous, an event listener can be added on the returned object to check if there were problems during rendering. The exact event to lookout for is called <em>noAds</em> which is fired when the render() method could not show an ad.  Hereâ€™s an illustration of the correct way to use output from the library</p>

<p>Illustration:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>let adObject = $pop.render(...)

// If render returns an object, add an event listener
if (adObject ) {
  adObject .addEventListener('noAds', () =&gt; {
    // No ad could be shown - late stage - during rendering
    ...
  })
}
else {
  // No ad could be shown - early stage - during initialization
  ...
}
</code></pre></div></div>

<h4 id="list-of-all-events-fired">List of all events fired</h4>

<p>Plaese note that all events other than error* are in the order in which they occur.  Some events like <em>done</em> may only occur for video.</p>

<table>
  <thead>
    <tr>
      <th>Event Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>init</td>
      <td>A campaign has been selected; this does not eliminate the possibility of an <em>noAds</em> event from firing later in the lifecycle</td>
    </tr>
    <tr>
      <td>noAds</td>
      <td>No matching ad was found</td>
    </tr>
    <tr>
      <td>rendered</td>
      <td>Fired when an ad has rendered. A new property called <em>creativeType</em> which has a value of either <em>banner</em> or <em>video</em> is added to the <strong><em>ad-object</em></strong></td>
    </tr>
    <tr>
      <td>viewed</td>
      <td>Occurs when the video has been played for the minimum duration stipulated by either IAB or the brand</td>
    </tr>
    <tr>
      <td>done</td>
      <td>When a video ad has finished playing</td>
    </tr>
    <tr>
      <td>error</td>
      <td>An error occurred while plyaing a video ad</td>
    </tr>
  </tbody>
</table>

<h4 id="ad-object-attributes">Ad Object Attributes</h4>

<p>In addition to events that gets fired, the Ad Object also contains attributes that contain useful information.  These attribute <em>campaignCode</em> is available after the <em>init</em> event has been fired, the rest are available only after the <em>rendered</em> event</p>

<table>
  <thead>
    <tr>
      <th>Attribute Name</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>campaignCode</td>
      <td>An abbreviated campaign code associated with the campaign</td>
    </tr>
    <tr>
      <td>creativeType</td>
      <td>Contains a value of either <strong>banner</strong> or <strong>video</strong> depending on creative selected</td>
    </tr>
    <tr>
      <td>rxname</td>
      <td>The name or brand of the drug being advertised</td>
    </tr>
    <tr>
      <td>landingPage</td>
      <td>The landing page associated with the brand</td>
    </tr>
  </tbody>
</table>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/docs/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Populus Media - Integration Guide</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Populus Media - Integration Guide</li><li><a class="u-email" href="mailto:info@populus-media.com">info@populus-media.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/PopulusMedia"><svg class="svg-icon"><use xlink:href="/docs/assets/minima-social-icons.svg#github"></use></svg> <span class="username">PopulusMedia</span></a></li><li><a href="https://www.twitter.com/IncPopulus"><svg class="svg-icon"><use xlink:href="/docs/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">IncPopulus</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Populus Media - Integration Guide for Telehealth Media Partners  </p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
